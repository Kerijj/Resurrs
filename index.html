<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—Ä—Å–∏–∞–Ω–∏–Ω: –≠–∫–æ–Ω–æ–º–∏–∫–∞ –í—ã–∂–∏–≤–∞–Ω–∏—è (–®–µ–∫–µ–ª–∏)</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
        body { 
            font-family: 'Roboto', sans-serif; 
            background: #000c19; /* –¢–µ–º–Ω—ã–π –∫–æ—Å–º–æ—Å */
            color: #d8e2f0; /* –°–≤–µ—Ç–ª—ã–π —Ç–µ–∫—Å—Ç */
            padding: 25px; 
            line-height: 1.6;
        }
        .container { 
            max-width: 1000px; 
            margin: 0 auto; 
            padding: 35px; 
            background: #0f1c2c; /* –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ */
            border-radius: 18px; 
            border: 3px solid #e74c3c; /* –ö—Ä–∞—Å–Ω–∞—è –ª–∏–Ω–∏—è –ú–∞—Ä—Å–∞ */
            box-shadow: 0 10px 40px rgba(231, 76, 60, 0.3); 
        }
        h1 { color: #5cb85c; margin-top: 0; text-align: center; text-shadow: 0 0 5px rgba(92, 184, 92, 0.5); }
        h2 { color: #3498db; border-bottom: 2px solid #3e4451; padding-bottom: 15px; margin-top: 30px; }
        h3 { color: #e74c3c; }
        .intro, .round-content, #communication-panel { 
            margin-bottom: 25px; 
            padding: 25px; 
            border: 1px solid #3e4451; 
            border-radius: 12px; 
            background: #1e2127; 
        }
        
        /* –î–∏—Å–ø–ª–µ–π —Ä–µ—Å—É—Ä—Å–æ–≤ */
        .resources-display { 
            background: #282c34; 
            padding: 20px; 
            border-radius: 12px; 
            margin-top: 25px; 
            display: flex; 
            justify-content: space-between;
            align-items: center;
        }
        .status-info { flex: 1; margin-right: 30px;}
        .hp-bar { color: #e74c3c; font-weight: bold; font-size: 1.3em; }
        .actions-count { color: #f1c40f; font-weight: bold; font-size: 1.3em; }

        /* –ñ—É—Ä–Ω–∞–ª –∏ –∫–Ω–æ–ø–∫–∏ */
        .log-box { 
            margin-top: 20px; 
            background: #0f1c2c; 
            padding: 15px; 
            height: 180px; 
            overflow-y: scroll; 
            border-radius: 10px; 
            font-size: 0.9em; 
            border: 1px solid #3e4451;
        }
        button { 
            padding: 12px 20px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            margin: 6px; 
            font-weight: bold; 
            background: #3498db; 
            color: white; 
            transition: background 0.2s, opacity 0.2s; 
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4);
        }
        button:hover:not(:disabled) { background: #2980b9; }
        button:disabled { background: #555; cursor: not-allowed; opacity: 0.6; }

        /* –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å */
        .inventory-list { 
            list-style-type: none; 
            padding: 0; 
            display: flex; 
            flex-wrap: wrap; 
            gap: 15px;
        }
        .inventory-item { 
            padding: 10px 15px; 
            border-radius: 8px; 
            background: #1e2127;
            border: 1px solid #4b5263;
        }
        /* –§–æ—Ä–º—ã –∑–∞–¥–∞–Ω–∏–π/–ø–æ–∫—É–ø–æ–∫ */
        .task-form, .shop-form { 
            background: #282c34; 
            padding: 15px; 
            border-radius: 8px; 
            margin-top: 15px;
        }
        .task-form input, .shop-form input { 
            padding: 10px; 
            border-radius: 6px; 
            border: 1px solid #3498db; 
            background: #0f1c2c; 
            color: #d8e2f0; 
            margin-right: 10px; 
            width: 30%;
        }
        .shop-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dotted #3e4451;
        }
        .shop-item:last-child { border-bottom: none; }

        .trade-console {
            margin-top: 15px;
            padding: 15px;
            background: #3e4451;
            border-radius: 8px;
        }
        .craft-panel {
            margin-top: 15px;
            padding: 15px;
            background: #282c34;
            border-radius: 8px;
            border-left: 5px solid #2ecc71;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>üëΩ –í–´–ñ–ò–í–ê–ù–ò–ï –ù–ê –ú–ê–†–°–ï: –≠–ö–û–ù–û–ú–ò–ö–ê</h1>
        <div id="game-area">
            
            <div class="intro" id="intro-screen">
                <h2>–í—ã–±–æ—Ä –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</h2>
                <p>–í–∞—à–∞ –≥—Ä—É–ø–ø–∞ - –ø–æ—Å–ª–µ–¥–Ω—è—è –Ω–∞–¥–µ–∂–¥–∞. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å. –ö–∞–∂–¥—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∏–º–µ–µ—Ç —Å–≤–æ–µ **—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ** –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏.</p>
                
                <div class="group-select" style="display: flex; justify-content: space-around; flex-wrap: wrap;">
                    <button onclick="startGame('Technocrats')">üõ†Ô∏è –¢–µ—Ö–Ω–æ–∫—Ä–∞—Ç—ã (–≠–Ω–µ—Ä–≥–∏—è –∏ –õ–æ–≥–∏—Å—Ç–∏–∫–∞)</button>
                    <button onclick="startGame('Bioengineers')">üß™ –ë–∏–æ–∏–Ω–∂–µ–Ω–µ—Ä—ã (–í–æ–¥–∞ –∏ –ü–∏—â–∞)</button>
                    <button onclick="startGame('Constructors')">üß± –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã (–ñ–∏–ª—å–µ –∏ –ó–∞—â–∏—Ç–∞)</button>
                </div>
            </div>

            <div id="game-round" style="display:none;">
                <h2 class="current-round-title" id="round-title"></h2>
                
                <div class="round-content" id="round-description"></div>

                <div class="resources-display">
                    <div class="status-info">
                        <h3>–ì—Ä—É–ø–ø–∞: <span id="player-group-name"></span></h3>
                        <p>–ñ–∏–∑–Ω–µ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ (HP): <span id="res-hp" class="hp-bar"></span></p>
                        <p>–î–µ–π—Å—Ç–≤–∏–π –æ—Å—Ç–∞–ª–æ—Å—å: <span id="actions-remaining" class="actions-count"></span> / 3</p>
                        <p id="group-status"></p>
                    </div>
                    <ul class="inventory-list" id="inventory-list-display"></ul>
                </div>
                
                <div id="craft-area" class="craft-panel" style="display: none;">
                    <h3>üî¨ –ü—Ä–∏–±–æ—Ä—ã (–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ)</h3>
                    <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∞–∑–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞. –≠—Ç–æ **–Ω–µ —Ç—Ä–∞—Ç–∏—Ç –¥–µ–π—Å—Ç–≤–∏–µ**.</p>
                    <div id="craft-buttons"></div>
                </div>

                <div class="action-area" id="action-area"></div>
                
                <div id="communication-panel" class="intro">
                    <h3>üì¢ –û–±—â–∏–π –∫–∞–Ω–∞–ª —Å–≤—è–∑–∏</h3>
                    <button onclick="simulateConversation()" style="background: #e74c3c;">–ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –û–±—â–µ–Ω–∏–µ</button>
                    <p id="communication-message">–ö–∞–Ω–∞–ª —á–∏—Å—Ç. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç —Å –¥—Ä—É–≥–∏–º–∏ –≥—Ä—É–ø–ø–∞–º–∏...</p>
                    
                    <div id="final-choice-dialogue" style="display:none; margin-top: 15px;">
                         <button onclick="makeFinalChoice('Unite')" style="background: #2ecc71;">‚úÖ –û–±—ä–µ–¥–∏–Ω–∏—Ç—å—Å—è (–ü–æ–±–µ–¥–∞)</button>
                         <button onclick="makeFinalChoice('Solo')" style="background: #e74c3c;">‚ùå –í—ã–∂–∏–≤–∞—Ç—å –≤ –æ–¥–∏–Ω–æ—á–∫—É (–ü–æ—Ä–∞–∂–µ–Ω–∏–µ)</button>
                    </div>
                </div>

                <div class="log-box">
                    **–ñ—É—Ä–Ω–∞–ª –ë–æ—Ä—Ç–∞**
                    <div id="game-log"></div>
                </div>
                
                <button onclick="checkNextRound()" style="background: #3498db; width: 100%; margin-top: 20px;">–ó–∞–≤–µ—Ä—à–∏—Ç—å –†–∞—É–Ω–¥ (–ü–µ—Ä–µ—Ö–æ–¥)</button>
            </div>
            
            <div id="game-over" style="display:none; text-align: center;">
                 <h2 style="color: #e74c3c;">üî¥ –ú–ò–°–°–ò–Ø –ü–†–û–í–ê–õ–ï–ù–ê</h2>
                 <p id="game-over-message" style="font-size: 1.5em;"></p>
            </div>
        </div>
    </div>

    <script>
        // --- –î–ê–ù–ù–´–ï –ò–ì–†–´ ---
        const RESOURCES = {
            S: { name: '–®–µ–∫–µ–ª–∏', code: 'S', icon: '‚Ç™' }, // –í–∞–ª—é—Ç–∞
            W: { name: '–í–æ–¥–∞ (10–ª)', code: 'W', icon: 'üíß' },
            T: { name: '–ü–æ—á–≤–∞ (5–∫–≥)', code: 'T', icon: '‚õ∞Ô∏è' },
            M: { name: '–ú–µ—Ç–∞–ª–ª (10–∫–≥)', code: 'M', icon: 'üî©' },
            E: { name: '–≠–Ω–µ—Ä–≥–æ—è—á–µ–π–∫–∞', code: 'E', icon: '‚ö°' },
            K: { name: '–ö–∞–±–µ–ª–∏ (10–º)', code: 'K', icon: 'üîó' },
            
            // –ü—Ä–∏–±–æ—Ä—ã (–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ)
            P: { name: '–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ü–æ—á–≤—ã', code: 'P', icon: 'üî¨' }, // Bio
            G: { name: '–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π –†–µ–∞–∫—Ç–æ—Ä', code: 'G', icon: '‚òÄÔ∏è' }, // Techno
            C: { name: '–ú–æ–¥—É–ª—å –ì–µ—Ä–º–µ—Ç–∏–∑–∞—Ü–∏–∏', code: 'C', icon: 'üì¶' }, // Constructor
            
            HP: { name: '–ñ–∏–∑–Ω–µ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ', code: 'HP', icon: 'üíî' }
        };
        
        const GROUP_NAMES = {
            Technocrats: 'üõ†Ô∏è –¢–µ—Ö–Ω–æ–∫—Ä–∞—Ç—ã', 
            Bioengineers: 'üß™ –ë–∏–æ–∏–Ω–∂–µ–Ω–µ—Ä—ã', 
            Constructors: 'üß± –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã'
        };

        const ROUND_TITLES = [
            "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ú–∏—Å—Å–∏–∏",
            "–†–∞—É–Ω–¥ 1: –ó–∞—Ä–∞–±–æ—Ç–æ–∫ (–ó–∞–¥–∞–Ω–∏—è)",
            "–†–∞—É–Ω–¥ 2: –ü–æ–∫—É–ø–∫–∞ (100 ‚Ç™, –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä)",
            "–†–∞—É–Ω–¥ 3: –ó–∞—Ä–∞–±–æ—Ç–æ–∫ (–ó–∞–¥–∞–Ω–∏—è)",
            "–†–∞—É–Ω–¥ 4: –ü–æ–∫—É–ø–∫–∞ (100 ‚Ç™, –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –†–µ—Å—É—Ä—Å—ã)",
            "–†–∞—É–Ω–¥ 5: –ó–∞—Ä–∞–±–æ—Ç–æ–∫ (–ó–∞–¥–∞–Ω–∏—è)",
            "–†–∞—É–Ω–¥ 6: –ü–æ–∫—É–ø–∫–∞ (100 ‚Ç™, –ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å)",
            "–†–∞—É–Ω–¥ 7: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –§–∏–Ω–∞–ª"
        ];
        
        // –°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏–±–æ—Ä–æ–≤
        const CRAFT_COSTS = {
            P: { T: 5, W: 5, K: 3, name: RESOURCES.P.name }, 
            G: { E: 5, M: 5, K: 3, name: RESOURCES.G.name }, 
            C: { M: 5, E: 5, T: 3, name: RESOURCES.C.name }
        };

        // –¶–µ–Ω—ã –¥–ª—è —Ä–∞—É–Ω–¥–æ–≤ –ø–æ–∫—É–ø–æ–∫ (W, T, M, E, K)
        const SHOP_ITEMS = {
            R2: [
                { code: 'W', price: 20, name: '–í–æ–¥–∞ (10–ª)' },
                { code: 'T', price: 15, name: '–ü–æ—á–≤–∞ (5–∫–≥)' },
                { code: 'M', price: 25, name: '–ú–µ—Ç–∞–ª–ª (10–∫–≥)' },
                { code: 'K', price: 10, name: '–ö–∞–±–µ–ª–∏ (10–º)' },
            ],
            R4: [
                { code: 'E', price: 30, name: '–≠–Ω–µ—Ä–≥–æ—è—á–µ–π–∫–∞' },
                { code: 'W', price: 20, name: '–í–æ–¥–∞ (10–ª)' },
                { code: 'T', price: 15, name: '–ü–æ—á–≤–∞ (5–∫–≥)' },
                { code: 'P', price: 50, name: RESOURCES.P.name, isTool: true },
                { code: 'G', price: 50, name: RESOURCES.G.name, isTool: true },
            ],
            R6: [
                { code: 'M', price: 25, name: '–ú–µ—Ç–∞–ª–ª (10–∫–≥)' },
                { code: 'E', price: 30, name: '–≠–Ω–µ—Ä–≥–æ—è—á–µ–π–∫–∞' },
                { code: 'C', price: 50, name: RESOURCES.C.name, isTool: true },
                { code: 'K', price: 10, name: '–ö–∞–±–µ–ª–∏ (10–º)' },
            ]
        };
        
        // –ó–∞–¥–∞–Ω–∏—è (R1, R3, R5)
        const THEMATIC_TASKS = {
            R1: { question: "–ö–∞–∫–æ–π —Ö–∏–º–∏—á–µ—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–∞—Ä—Å–∏–∞–Ω—Å–∫–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã?", answer: "–£–ì–õ–ï–ö–ò–°–õ–´–ô–ì–ê–ó", reward: 20 },
            R3: { question: "–ù–∞–∑–æ–≤–∏—Ç–µ —Å–∞–º—ã–π –±–ª–∏–∑–∫–∏–π —Å–ø—É—Ç–Ω–∏–∫ –ú–∞—Ä—Å–∞ (–ø–æ –æ—Ä–±–∏—Ç–µ).", answer: "–§–û–ë–û–°", reward: 30 },
            R5: { question: "–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∏—Ç—å–µ–≤–æ–π –≤–æ–¥—ã –Ω–∞ –ú–∞—Ä—Å–µ - —ç—Ç–æ –µ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ —á–µ–≥–æ?", answer: "–õ–ï–î", reward: 40 },
        };

        let gameState = {
            group: null,
            inventory: { S: 0, W: 0, T: 0, M: 0, E: 0, K: 0, P: 0, G: 0, C: 0, HP: 15 }, 
            currentRound: 0,
            actionsTaken: 0,
            maxActions: 3,
            status: "–û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –≥—Ä—É–ø–ø—ã...",
            conversationHistory: 0,
            requiredTool: null // –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –≥—Ä—É–ø–ø–µ –¥–ª—è –≤—ã–∂–∏–≤–∞–Ω–∏—è
        };

        // --- –£–ü–†–ê–í–õ–ï–ù–ò–ï –ò–ì–†–û–ô ---

        function updateLog(message, isError = false) {
            const logBox = document.getElementById('game-log');
            const prefix = isError ? '‚ùå ' : '‚úÖ ';
            logBox.innerHTML += `<p>${prefix}${message}</p>`;
            logBox.scrollTop = logBox.scrollHeight;
        }

        function takeAction(actionType = "–¥–µ–π—Å—Ç–≤–∏–µ") {
            if (gameState.actionsTaken >= gameState.maxActions) {
                updateLog(`üõë –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π (3) –≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ. (${actionType})`, true);
                return false;
            }
            gameState.actionsTaken++;
            document.getElementById('actions-remaining').textContent = gameState.maxActions - gameState.actionsTaken;
            return true;
        }

        function checkNextRound() {
            if (gameState.currentRound !== 7 && gameState.actionsTaken < gameState.maxActions) {
                updateLog("üõë –í—ã –µ—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤—Å–µ 3 –¥–µ–π—Å—Ç–≤–∏—è. –ù–∞–∂–º–∏—Ç–µ –µ—â–µ —Ä–∞–∑ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.", true);
            }
            if (gameState.currentRound === 7) return; 

            // –°–ø–∏—Å–∞–Ω–∏–µ HP 
            const hpLoss = 3; 
            gameState.inventory.HP -= hpLoss;
            updateLog(`--- –ï–ñ–ï–î–ù–ï–í–ù–´–ô –†–ê–°–•–û–î ---`);
            updateLog(`üíî –ñ–∏–∑–Ω–µ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ -${hpLoss} HP. –¢–µ–∫—É—â–∏–π HP: ${gameState.inventory.HP}`);

            if (gameState.inventory.HP <= 0) {
                gameOver("–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ–π —Å–∏—Å—Ç–µ–º –∂–∏–∑–Ω–µ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. –ú–∏—Å—Å–∏—è –æ–∫–æ–Ω—á–µ–Ω–∞.");
                return;
            }
            
            gameState.currentRound++;
            gameState.actionsTaken = 0; 
            updateLog(`=== –ü–µ—Ä–µ—Ö–æ–¥ –≤ ${ROUND_TITLES[gameState.currentRound]} ===`, true);
            gameState.status = "–†–∞—É–Ω–¥ –Ω–∞—á–∞—Ç. –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ.";
            loadRound(gameState.currentRound);
            updateUI();
        }

        function gameOver(message) {
            document.getElementById('game-round').style.display = 'none';
            document.getElementById('game-over').style.display = 'block';
            document.getElementById('game-over-message').textContent = message;
        }

        function startGame(groupName) {
            gameState.group = groupName;
            gameState.currentRound = 1;
            gameState.inventory.S = 50; // –ù–∞—á–∞–ª—å–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –ø—Ä–∏–±–æ—Ä–∞
            if (groupName === 'Technocrats') gameState.requiredTool = 'G';
            else if (groupName === 'Bioengineers') gameState.requiredTool = 'P';
            else gameState.requiredTool = 'C';

            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('game-round').style.display = 'block';
            document.getElementById('craft-area').style.display = 'block';
            
            updateLog(`–ì—Ä—É–ø–ø–∞ –≤—ã–±—Ä–∞–Ω–∞ **${GROUP_NAMES[groupName]}**.`);
            updateLog(`–í–∞—à **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –ø—Ä–∏–±–æ—Ä** –¥–ª—è –≤—ã–∂–∏–≤–∞–Ω–∏—è: **${RESOURCES[gameState.requiredTool].name}**.`);
            updateLog(`–ù–∞—á–∞–ª—å–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª: 50 ‚Ç™.`);
            
            updateUI();
            loadRound(1);
        }
        
        // --- UI –∏ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å ---

        function updateUI() {
            document.getElementById('player-group-name').textContent = GROUP_NAMES[gameState.group];
            const hpElement = document.getElementById('res-hp');
            hpElement.textContent = gameState.inventory.HP;
            
            if (gameState.inventory.HP <= 6) hpElement.style.color = '#e74c3c';
            else if (gameState.inventory.HP > 12) hpElement.style.color = '#2ecc71';
            else hpElement.style.color = '#f1c40f';
            
            document.getElementById('actions-remaining').textContent = gameState.maxActions - gameState.actionsTaken;
            document.getElementById('group-status').innerHTML = gameState.status;
            document.getElementById('round-title').textContent = ROUND_TITLES[gameState.currentRound];
            
            // –°–ø–∏—Å–æ–∫ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
            const inventoryList = document.getElementById('inventory-list-display');
            let html = '';
            const orderedKeys = ['S', 'W', 'T', 'M', 'E', 'K', 'P', 'G', 'C'].filter(k => gameState.inventory[k] > 0);
            
            orderedKeys.forEach(code => {
                const count = gameState.inventory[code];
                const res = RESOURCES[code];
                let indicator = '';
                if (code === gameState.requiredTool) indicator = '‚≠ê'; // –ó–≤–µ–∑–¥–∞ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
                
                html += `<li class="inventory-item">${res.icon} ${res.name}: ${count} ${indicator}</li>`;
            });
            inventoryList.innerHTML = html || '<li class="inventory-item">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</li>';
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –∫—Ä–∞—Ñ—Ç–∞
            updateCraftButtons();
        }
        
        // --- –õ–û–ì–ò–ö–ê –ö–†–ê–§–¢–ê (–ü—Ä–∏–±–æ—Ä—ã) ---
        function updateCraftButtons() {
             const craftArea = document.getElementById('craft-buttons');
             let html = '';
             
             ['P', 'G', 'C'].forEach(toolCode => {
                 const cost = CRAFT_COSTS[toolCode];
                 let costStr = '';
                 let canCraft = true;
                 
                 for (const resCode in cost) {
                     if (resCode !== 'name') {
                        costStr += `${cost[resCode]} ${RESOURCES[resCode].icon} `;
                        if (gameState.inventory[resCode] < cost[resCode]) {
                            canCraft = false;
                        }
                     }
                 }
                 
                 html += `<p style="font-size: 0.9em; margin: 5px 0;">**${RESOURCES[toolCode].name}**: ${costStr}</p>`;
                 
                 if (gameState.inventory[toolCode] === 0) {
                     html += `<button onclick="craftTool('${toolCode}')" ${canCraft ? '' : 'disabled'}>–°–æ–±—Ä–∞—Ç—å ${RESOURCES[toolCode].name}</button>`;
                 } else {
                     html += `<button disabled style="background: #2ecc71;">–°–æ–±—Ä–∞–Ω</button>`;
                 }
             });
             craftArea.innerHTML = html;
        }

        function craftTool(toolCode) {
            // –ö—Ä–∞—Ñ—Ç –Ω–µ —Ç—Ä–∞—Ç–∏—Ç –¥–µ–π—Å—Ç–≤–∏–µ, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –ø–æ–∫—É–ø–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.
            const cost = CRAFT_COSTS[toolCode];
            let canCraft = true;

            for (const res in cost) {
                if (res !== 'name' && gameState.inventory[res] < cost[res]) {
                    canCraft = false;
                    break;
                }
            }

            if (canCraft) {
                for (const res in cost) {
                    if (res !== 'name') gameState.inventory[res] -= cost[res];
                }
                gameState.inventory[toolCode]++;
                updateLog(`üî¨ –£—Å–ø–µ—à–Ω—ã–π –ö—Ä–∞—Ñ—Ç! –°–æ–∑–¥–∞–Ω **1 ${RESOURCES[toolCode].name}**.`);
            } else {
                updateLog(`üõë –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è —Å–±–æ—Ä–∫–∏ ${RESOURCES[toolCode].name}.`, true);
            }
            updateUI();
        }

        // --- –õ–û–ì–ò–ö–ê –ó–ê–†–ê–ë–û–¢–ö–ê (–†–∞—É–Ω–¥—ã 1, 3, 5) ---
        function submitTask(round) {
            const task = THEMATIC_TASKS[`R${round}`];
            const inputElement = document.getElementById(`task-input-${round}`);
            const answer = inputElement.value.trim().toUpperCase().replace(/\s/g, '');
            inputElement.value = ''; // –°–±—Ä–æ—Å –ø–æ–ª—è –≤–≤–æ–¥–∞
            
            if (!answer) {
                updateLog("–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–¥–∞–Ω–∏–µ.", true);
                return;
            }
            
            if (!takeAction("–æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–≥–∞–¥–∫—É")) return;

            const correct = task.answer.replace(/\s/g, '');
            
            if (answer === correct) {
                 gameState.inventory.S += task.reward;
                 updateLog(`üéâ **[–û–¢–í–ï–¢ –í–ï–†–ù–´–ô!]** –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ **+${task.reward} ‚Ç™**.`);
            } else {
                 updateLog(`‚ùå **[–û–¢–í–ï–¢ –ù–ï–í–ï–†–ù–´–ô]** –û—Ç–≤–µ—Ç "${answer}" –Ω–µ –ø—Ä–∏–Ω—è—Ç. –®–µ–∫–µ–ª–∏ –Ω–µ –ø–æ–ª—É—á–µ–Ω—ã.`, true);
            }
            updateUI();
        }
        
        // --- –õ–û–ì–ò–ö–ê –ü–û–ö–£–ü–û–ö (–†–∞—É–Ω–¥—ã 2, 4, 6) ---
        function buyItem(itemCode, price) {
            const currentRound = gameState.currentRound;
            const amountId = `buy-amount-${currentRound}-${itemCode}`;
            const amount = parseInt(document.getElementById(amountId).value);

            if (isNaN(amount) || amount <= 0) {
                updateLog("–£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.", true);
                return;
            }
            
            if (!takeAction("–ø–æ–∫—É–ø–∫–∞")) return;
            
            const totalCost = amount * price;

            if (gameState.inventory.S < totalCost) {
                updateLog(`üõë –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ **‚Ç™** –¥–ª—è –ø–æ–∫—É–ø–∫–∏. –¢—Ä–µ–±—É–µ—Ç—Å—è: ${totalCost} ‚Ç™.`, true);
                gameState.actionsTaken--; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ, —Ç–∞–∫ –∫–∞–∫ –ø–æ–∫—É–ø–∫–∞ –Ω–µ —Å–æ—Å—Ç–æ—è–ª–∞—Å—å
                document.getElementById('actions-remaining').textContent = gameState.maxActions - gameState.actionsTaken;
                return;
            }
            
            gameState.inventory.S -= totalCost;
            
            if (itemCode === 'P' || itemCode === 'G' || itemCode === 'C') {
                 // –ü–æ–∫—É–ø–∫–∞ –≥–æ—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–±–æ—Ä–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ –º–∞–≥–∞–∑–∏–Ω–µ)
                 gameState.inventory[itemCode] += 1; // –í—Å–µ –ø—Ä–∏–±–æ—Ä—ã –ø–æ–∫—É–ø–∞—é—Ç—Å—è –ø–æ 1 —à—Ç, –¥–∞–∂–µ –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –≤–≤–µ–ª –±–æ–ª—å—à–µ
                 updateLog(`üõí –ö—É–ø–ª–µ–Ω –ø—Ä–∏–±–æ—Ä **${RESOURCES[itemCode].name}** –∑–∞ ${totalCost} ‚Ç™.`);
            } else {
                 // –ü–æ–∫—É–ø–∫–∞ –±–∞–∑–æ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
                 gameState.inventory[itemCode] += amount;
                 updateLog(`üõí –ö—É–ø–ª–µ–Ω–æ **+${amount} ${RESOURCES[itemCode].name}** –∑–∞ ${totalCost} ‚Ç™.`);
            }

            updateUI();
        }

        // --- –õ–û–ì–ò–ö–ê –û–ë–©–ï–ù–ò–Ø (–û–±–º–µ–Ω) ---
        function simulateConversation() {
            const messages = [
                "–ì—Ä—É–ø–ø–∞ 1: '–£ –Ω–∞—Å –µ—Å—Ç—å –∏–∑–±—ã—Ç–æ–∫ –≠–Ω–µ—Ä–≥–æ—è—á–µ–µ–∫ (E). –ö—Ç–æ –º–æ–∂–µ—Ç –æ–±–º–µ–Ω—è—Ç—å –Ω–∞ –í–æ–¥—É (W) –∏–ª–∏ –ü–æ—á–≤—É (T)?'",
                "–ì—Ä—É–ø–ø–∞ 2: '–ù–∞—à–∏ –∑–∞–ø–∞—Å—ã –ú–µ—Ç–∞–ª–ª–∞ (M) –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–∏. –ì–æ—Ç–æ–≤—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ö–∞–±–µ–ª–∏ (K) –∏–ª–∏ –®–µ–∫–µ–ª–∏ (S)!'",
                "–ì—Ä—É–ø–ø–∞ 3: '–ú–Ω–µ –Ω—É–∂–µ–Ω –ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π –†–µ–∞–∫—Ç–æ—Ä (G). –ì–æ—Ç–æ–≤—ã –æ—Ç–¥–∞—Ç—å –≤—Å–µ –ö–∞–±–µ–ª–∏, —á—Ç–æ –µ—Å—Ç—å!'",
                "–ì—Ä—É–ø–ø–∞ 1: '–£ –Ω–∞—Å –µ—Å—Ç—å 5M –∏ 5K, –∏—â–µ–º T. –î–∞–≤–∞–π—Ç–µ –æ–±—Å—É–¥–∏–º –æ–±–º–µ–Ω!'",
                "–ì—Ä—É–ø–ø–∞ 2: '–ü–æ–Ω—è–ª, —Å–≤—è–∂–µ–º—Å—è. –£ –Ω–∞—Å –µ—Å—Ç—å 10T. –ù—É–∂–Ω—ã 2E.'"
            ];
            
            const message = messages[gameState.conversationHistory % messages.length];
            document.getElementById('communication-message').textContent = `üí¨ ${message}`;
            
            gameState.conversationHistory++;
        }
        
        // --- –§–ò–ù–ê–õ–¨–ù–´–ô –†–ê–£–ù–î (7) ---
        function makeFinalChoice(choice) {
            const hasRequiredTool = gameState.inventory[gameState.requiredTool] > 0;
            const hasAllTools = gameState.inventory.P > 0 && gameState.inventory.G > 0 && gameState.inventory.C > 0;
            
            document.getElementById('final-choice-dialogue').style.display = 'none';

            if (choice === 'Unite') {
                if (hasAllTools) {
                    gameOver(`üéâ **–ü–û–ë–ï–î–ê (–û–ë–™–ï–î–ò–ù–ï–ù–ò–ï)!** –í—ã —Å–æ–±—Ä–∞–ª–∏ –≤—Å–µ —Ç—Ä–∏ –ø—Ä–∏–±–æ—Ä–∞ (${RESOURCES.P.icon}, ${RESOURCES.G.icon}, ${RESOURCES.C.icon}) –∏ –æ–±—ä–µ–¥–∏–Ω–∏–ª–∏ —É—Å–∏–ª–∏—è. –°–ø–∞—Å–∞—Ç–µ–ª—å–Ω–∞—è –∫–∞–ø—Å—É–ª–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞. –í—ã ‚Äî –≥–µ—Ä–æ–∏ –ú–∞—Ä—Å–∞!`);
                } else {
                     gameOver(`‚ö†Ô∏è **–ü–†–û–ò–ì–†–´–® (–û–ë–™–ï–î–ò–ù–ï–ù–ò–ï)!** –í—ã —Ä–µ—à–∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å—Å—è, –Ω–æ –≤–∞—à–µ–π –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ –≤—Å–µ—Ö —Ç—Ä–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –ø—Ä–∏–±–æ—Ä–æ–≤. –ù–µ–ø–æ–ª–Ω–∞—è –±–∞–∑–∞ –Ω–µ –≤—ã–¥–µ—Ä–∂–∞–ª–∞ –±—É—Ä–∏. –ú–∏—Å—Å–∏—è –ø—Ä–æ–≤–∞–ª–µ–Ω–∞.`);
                }
            } else if (choice === 'Solo') {
                if (hasRequiredTool) {
                    gameOver(`‚ùå **–ü–†–û–ò–ì–†–´–® (–û–î–ò–ù–û–ß–ï–°–¢–í–û)!** –í—ã –≤—ã–∂–∏–ª–∏ –≤ –æ–¥–∏–Ω–æ—á–∫—É, –∏—Å–ø–æ–ª—å–∑—É—è —Å–≤–æ–π **${RESOURCES[gameState.requiredTool].name}**, –Ω–æ –ø–æ—Ç–µ—Ä—è–ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç —Å –ó–µ–º–ª–µ–π. –°–ø—É—Å—Ç—è –≥–æ–¥—ã –≤–∞—Å –Ω–∞—Ö–æ–¥—è—Ç, –Ω–æ —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω—É—é –∫–∞–ø—Å—É–ª—É –±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–º–ø–ª–µ–∫—Ç–∞ –ø—Ä–∏–±–æ—Ä–æ–≤ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å. –í—ã ‚Äî –≤—ã–∂–∏–≤—à–∏–π, –Ω–æ –Ω–µ —Å–ø–∞—Å–∏—Ç–µ–ª—å.`);
                } else {
                    gameOver(`üíÄ **–ö–ê–¢–ê–°–¢–†–û–§–ê (–û–î–ò–ù–û–ß–ï–°–¢–í–û)!** –í—ã —Ä–µ—à–∏–ª–∏ –≤—ã–∂–∏–≤–∞—Ç—å –≤ –æ–¥–∏–Ω–æ—á–∫—É, –Ω–æ –Ω–µ —Å–º–æ–≥–ª–∏ —Å–æ–±—Ä–∞—Ç—å –¥–∞–∂–µ —Å–≤–æ–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –ø—Ä–∏–±–æ—Ä **${RESOURCES[gameState.requiredTool].name}**. –°–∏—Å—Ç–µ–º—ã –∂–∏–∑–Ω–µ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ—Ç–∫–∞–∑–∞–ª–∏. –ú–∏—Å—Å–∏—è –ø—Ä–æ–≤–∞–ª–µ–Ω–∞.`);
                }
            }
        }


        // --- –ó–ê–ì–†–£–ó–ö–ê –†–ê–£–ù–î–û–í ---

        function getRoundDescription(round) {
            switch(round) {
                case 1: case 3: case 5:
                    const task = THEMATIC_TASKS[`R${round}`];
                    return `
                        <h3>–¶–µ–ª—å: –ó–∞—Ä–∞–±–æ—Ç–æ–∫ (–í–∏–∫—Ç–æ—Ä–∏–Ω–∞)</h3>
                        <p>–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å **${task.reward} ‚Ç™**. –ö–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞ ‚Äî —ç—Ç–æ 1 –¥–µ–π—Å—Ç–≤–∏–µ.</p>
                        <hr>
                        <div class="task-form">
                            <h4>–í–æ–ø—Ä–æ—Å ${round}:</h4>
                            <p>***${task.question}***</p>
                            <input type="text" id="task-input-${round}" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç (–°–ª–∏—Ç–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ)">
                            <button onclick="submitTask(${round})">–û—Ç–≤–µ—Ç–∏—Ç—å (1 –¥–µ–π—Å—Ç–≤–∏–µ)</button>
                        </div>
                    `;
                case 2: case 4: case 6:
                    const shopList = SHOP_ITEMS[`R${round}`];
                    return `
                        <h3>–¶–µ–ª—å: –ü–æ–∫—É–ø–∫–∞ (–ú–∞–≥–∞–∑–∏–Ω "–ê—Ä–µ—Å" - 100 ‚Ç™)</h3>
                        <p>–í –Ω–∞—á–∞–ª–µ —Ä–∞—É–Ω–¥–∞ –≤—ã –ø–æ–ª—É—á–∏–ª–∏ **+100 ‚Ç™**. –¢—Ä–∞—Ç—å—Ç–µ –∏—Ö –Ω–∞ –±–∞–∑–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã –∏, –Ω–∞—á–∏–Ω–∞—è —Å R4, –Ω–∞ –ø—Ä–∏–±–æ—Ä—ã. –ö–∞–∂–¥–∞—è –ø–æ–∫—É–ø–∫–∞ ‚Äî —ç—Ç–æ 1 –¥–µ–π—Å—Ç–≤–∏–µ.</p>
                        <hr>
                        <div class="shop-form">
                            ${shopList.map(item => `
                                <div class="shop-item">
                                    <span>**${RESOURCES[item.code].icon} ${item.name}** | –¶–µ–Ω–∞: **${item.price} ‚Ç™** | ${item.isTool ? '–ü—Ä–∏–±–æ—Ä' : '–†–µ—Å—É—Ä—Å'}</span>
                                    <div>
                                        <input type="number" id="buy-amount-${round}-${item.code}" placeholder="–ö–æ–ª-–≤–æ (max ${item.isTool ? 1 : 99})" min="1" max="${item.isTool ? 1 : 99}" style="width: 100px;">
                                        <button onclick="buyItem('${item.code}', ${item.price})" style="background: #e74c3c;">–ö—É–ø–∏—Ç—å</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                case 7:
                    document.getElementById('final-choice-dialogue').style.display = 'block';
                    const tools = ['P', 'G', 'C'].map(c => RESOURCES[c].icon).join(', ');
                    const requiredToolName = RESOURCES[gameState.requiredTool].name;
                    return `
                        <h3>üí• –§–ò–ù–ê–õ–¨–ù–´–ô –í–´–ë–û–†: –í–´–ñ–ò–í–ê–ù–ò–ï</h3>
                        <p>–í–∞—à–∞ –≥—Ä—É–ø–ø–∞ —Å–æ–±—Ä–∞–ª–∞: **${gameState.inventory[gameState.requiredTool] > 0 ? requiredToolName : '–ù–µ—Ç'}**. –û–±—â–∏–π –∞—Ä—Å–µ–Ω–∞–ª: ${tools}.</p>
                        <p>–ù–∞ –ú–∞—Ä—Å –Ω–∞–¥–≤–∏–≥–∞–µ—Ç—Å—è —Å–∞–º–∞—è —Å–∏–ª—å–Ω–∞—è –±—É—Ä—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –∫–æ–≥–¥–∞-–ª–∏–±–æ –≤–∏–¥–µ–ª–∏. –°–ø–∞—Å–∞—Ç–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∑–æ–Ω–µ —ç–≤–∞–∫—É–∞—Ü–∏–∏, –Ω–æ –µ–º—É –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç –ø—Ä–∏–±–æ—Ä–æ–≤, —Å–æ–±—Ä–∞–Ω–Ω—ã–π –≤—Å–µ–º–∏ —Ç—Ä–µ–º—è –≥—Ä—É–ø–ø–∞–º–∏. –í—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å–≤—è–∑—å –Ω–µ—Ç. –í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π –ø—É—Ç—å:</p>
                        <hr>
                        <ul>
                            <li>**–û–ë–™–ï–î–ò–ù–ò–¢–¨–°–Ø**: –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –æ–±—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Å–µ—Ö –≥—Ä—É–ø–ø –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã (P, G, C) –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω–æ–≥–æ –º–æ–¥—É–ª—è. (–ü–û–ë–ï–î–ê, –µ—Å–ª–∏ –≤—Å–µ —Ç—Ä–∏ –ø—Ä–∏–±–æ—Ä–∞ –µ—Å—Ç—å —É –≤—Å–µ—Ö –≥—Ä—É–ø–ø –≤–º–µ—Å—Ç–µ).</li>
                            <li>**–í–´–ñ–ò–í–ê–¢–¨ –í –û–î–ò–ù–û–ß–ö–£**: –í—ã –ø–æ–ª–∞–≥–∞–µ—Ç–µ—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–≤–æ–∏ –ø—Ä–∏–±–æ—Ä—ã –∏ –Ω–∞–¥–µ–µ—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–µ–≥–æ **${requiredToolName}** –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–∂–∏—Ç—å –±—É—Ä—é –≤ —Å–≤–æ–µ–π –±–∞–∑–µ. (–ü–û–†–ê–ñ–ï–ù–ò–ï, —Ç–∞–∫ –∫–∞–∫ —Å–ø–∞—Å–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ–ª–Ω—ã–º —Å–æ—Å—Ç–∞–≤–æ–º).</li>
                        </ul>
                    `;
            }
        }

        function loadRound(round) {
            const desc = document.getElementById('round-description');
            desc.innerHTML = getRoundDescription(round);
            
            // –ï—Å–ª–∏ —Ä–∞—É–Ω–¥ –ø–æ–∫—É–ø–∫–∏, –Ω–∞—á–∏—Å–ª—è–µ–º 100 ‚Ç™
            if ([2, 4, 6].includes(round)) {
                 gameState.inventory.S += 100;
                 updateLog(`**+100 ‚Ç™** –Ω–∞—á–∏—Å–ª–µ–Ω–æ –Ω–∞ —Å—á–µ—Ç.`);
            }
            
            // –°–±—Ä–æ—Å –ø–æ–ª—è –≤—ã–±–æ—Ä–∞ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Ä–∞—É–Ω–¥–µ
            document.getElementById('final-choice-dialogue').style.display = 'none';

            updateUI();
        }
        
        document.addEventListener('DOMContentLoaded', () => {
             updateLog("–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.");
        });
    </script>
</body>
</html>
